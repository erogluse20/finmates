<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finmates</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- Google Identity -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/reactions.css">
</head>

<body>
    <div id="app" class="container">
        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Feed will be injected here -->
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="#" class="nav-item active"><i class="ph-fill ph-house"></i></a>
            <a href="#" class="nav-item"><i class="ph ph-calendar-blank"></i></a>
            <div class="nav-item-add">
                <button class="add-btn"><i class="ph ph-plus"></i></button>
            </div>
            <a href="#" class="nav-item"><i class="ph ph-bell"></i></a>
            <a href="#" class="nav-item"><i class="ph ph-gear"></i></a>
        </nav>
    </div>

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- App Logic & Config -->
    <script src="js/supabase.js?v=2"></script>
    <script src="js/app.js?v=2"></script>

    <!-- Data -->
    <script src="js/data/crypto_data.js?v=2"></script>
    <script src="js/data/bist_data.js?v=2"></script>
    <script src="js/data/fund_data.js?v=2"></script>
    <script src="js/data/assets.js?v=2"></script>

    <!-- Components & Views -->
    <script src="js/components/AssetSelector.js?v=2"></script>
    <script src="js/components/FeedItem.js?v=2"></script>
    <script src="js/views/CreatePortfolio.js?v=2"></script>
    <script src="js/views/Profile.js?v=2"></script>
    <script src="js/views/Login.js?v=2"></script>
    <script src="js/views/Settings.js?v=2"></script>

    <script>
        // NUCLEAR CACHE BUSTER: Unregister all service workers and clear cache
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(registrations => {
                for (let registration of registrations) {
                    registration.unregister().then(() => {
                        console.log('SW Unregistered');
                    });
                }
            });
        }
    </script>

    <!-- Version Marker for Debugging -->
    <div
        style="position:fixed; top:10px; left:10px; background:rgba(255,0,0,0.8); color:white; padding:4px 8px; border-radius:4px; font-size:10px; z-index:9999; pointer-events:none;">
        CORE-V3
    </div>

    <script>
        // Force service worker update on reload if version mismatch
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(registrations => {
                for (let registration of registrations) {
                    registration.update();
                }
            });
        }
    </script>
</body>

</html>